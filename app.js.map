{"version":3,"sources":["app/init.coffee","app/history.coffee","app/history_data.coffee","app/index.html","app/tags/app.tag","app/tags/competition.tag","app/tags/competition/future-matches.tag","app/tags/competition/past-matches.tag","app/tags/competition/standings.tag","app/tags/error404.tag","app/tags/home.tag","app/tags/loading.tag","app/tags/match.tag","app/tags/search.tag","app/tags/shared/matches.tag","app/tags/shared/score.tag","app/util.coffee","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":[],"mappings":"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AEE,IAAI,IAFN;QAGE,MAAM,SAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OA7BqB,EAoCrB;QACE,WAAW,aADb;QAEE,IAAI,IAFN;QAGE,MAAM,YAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OApCqB,EA2CrB;QACE,WAAW,WADb;QAEE,IAAI,KAFN;QAGE,MAAM,kBAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OA3CqB,EAkDrB;QACE,WAAW,QADb;QAEE,IAAI,KAFN;QAGE,MAAM,SAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OAlDqB,EAyDrB;QACE,WAAW,QADb;QAEE,IAAI,IAFN;QAGE,MAAM,uBAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OAzDqB,EAgErB;QACE,WAAW,eADb;QAEE,IAAI,KAFN;QAGE,MAAM,gCAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OAhEqB,EAwErB;QACE,WAAW,KADb;QAEE,IAAI,KAFN;QAGE,MAAM,KAHR;QAIE,UAAU,SAJZ;QAKE,MAAM,aALR;OAxEqB;;AAiFvB;;MAAA,IAAI,CAAC,MAAL,GAAc;QAAE,OAAO,CAAT;QAAY,YAAgB,UAA5B;;AAAd;AAEA,WAAO;EApF0B;AADJ,CAAjC;CCAA;CCAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"public/app.js","sourcesContent":["\n# need this in global namespace due to tags registers\n# exports = this; exports.riot = require 'riot'\nriot = require 'riot'\n","#\n# Search history\n#\nrequire.register 'history', (exports, require, module) ->\n  history_data = require 'history_data'\n\n  max_history_length = 100\n  max_score_count = 7 # it's purposely small to avoid items cached for too long\n\n  storage_key = 'search_history'\n\n  storageItem = localStorage.getItem(storage_key)\n  if storageItem\n    history = JSON.parse(storageItem)\n  else\n    localStorage.clear()\n    history = history_data.get_initial_history_list()\n\n  #\n  # Sort history (by count, then last_visit)\n  #\n  sort_history = (history) ->\n    # JS sort is not stable, need to compare array keys when counts are equal\n    history[key].key = key for key in [0..history.length-1]\n\n    history = history.sort (a, b) ->\n      diff = b._score.count - a._score.count\n      diff = b._score.last_visit - a._score.last_visit if diff == 0\n      diff = a.key - b.key if diff == 0\n      return diff\n\n  #\n  # Add new item to history\n  #\n  exports.update = (item) ->\n    history_item = history.find (history_item) -> item.type == history_item.type && item.id == history_item.id\n\n    if history_item\n      history_item._score ||= { count: 0, last_visit: null }\n      history_item._score.count += 1 if history_item._score.count < max_score_count\n      history_item._score.last_visit = new Date()\n    else\n      item._score = { count: 1, last_visit: new Date() }\n      item.active = false\n      history.unshift item\n      history.pop() if history.length > max_history_length\n\n    history = sort_history(history)\n    localStorage.setItem(storage_key, JSON.stringify(history))\n\n  #\n  # Get all history items (up to specified limit)\n  #\n  exports.getAll = (limit) ->\n    start = 0\n    end = limit - 1\n    history[start..end]\n\n  #\n  # Search history\n  #\n  exports.search = (query) ->\n    history.filter (result) ->\n      return true if result.name.toLowerCase().indexOf(query.toLowerCase()) == 0\n      return true if result.area_name.toLowerCase().indexOf(query.toLowerCase()) == 0\n      false\n","require.register 'history_data', (exports, require, module) ->\n  exports.get_initial_history_list = () ->\n    initial_history_list = [\n      {\n        area_name: \"England\",\n        id: \"04\",\n        name: \"Premier League\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Spain\",\n        id: \"80\",\n        name: \"Primera División\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Germany\",\n        id: \"1y\",\n        name: \"Bundesliga\"\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name : \"Italy\",\n        id: \"rw\",\n        name: \"Serie A\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"France\",\n        id: \"3w\",\n        name: \"Ligue 1\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Netherlands\",\n        id: \"4e\",\n        name: \"Eredivisie\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Argentina\",\n        id: \"97m\",\n        name: \"Primera División\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Mexico\"\n        id: \"873\",\n        name: \"Liga MX\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"Europe\",\n        id: \"5d\",\n        name: \"UEFA Champions League\"\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      {\n        area_name: \"South America\",\n        id: \"4nn\",\n        name: \"WC Qualification South America\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n      # not displayed, just for search\n      {\n        area_name: \"USA\",\n        id: \"1xy\",\n        name: \"MLS\",\n        teamtype: \"default\",\n        type: \"competition\",\n      },\n    ]\n\n    item._score = { count: 1, last_visit: new Date() } for item in initial_history_list\n\n    return initial_history_list\n","","riot.tag2('app', '<search></search> <div id=\"main\"></div> <p class=\"block nav\"> <a href=\"\" click=\"{go_back}\">back</a> &#183; <a href=\"/\">live</a> </p> <p class=\"disclaimer block\"> Football data mnmlist way. Open source prototype.<br> (<a href=\"https://github.com/sobstel/golazon#readme\">click here to learn more</a>) </p>', '.nav { margin-top: 1em; margin-bottom: 2em; text-align: center; } .nav a { color: #c66; } .disclaimer { margin-top: 1em; margin-bottom: 2em; font-style: italic; padding: 0 10px; font-size: 12px; text-align: center; } .disclaimer a { border-bottom: 1px dotted #666; text-decoration: none; }', '', function(opts) {\nriot.route.base('#!');\n\nriot.route('/', (function(_this) {\n  return function() {\n    return riot.mount('#main', 'home');\n  };\n})(this));\n\nriot.route('/c/*', (function(_this) {\n  return function(competition_id) {\n    return riot.mount('#main', 'competition', {\n      competition_id: competition_id\n    });\n  };\n})(this));\n\nriot.route('/m/*', (function(_this) {\n  return function(match_id) {\n    return riot.mount('#main', 'match', {\n      match_id: match_id\n    });\n  };\n})(this));\n\nriot.route((function(_this) {\n  return function() {\n    return riot.mount('#main', 'error404');\n  };\n})(this));\n\nriot.route.start(true);\n\nthis.go_back = function(e) {\n  return history.back();\n};\n});\n","riot.tag2('competition', '<h1 class=\"competition__title\"> <loading></loading> {title} </h1> <div class=\"competition__container\" if=\"{competition}\"> <competition-past-matches></competition-past-matches> <competition-future-matches></competition-future-matches> <competition-standings></competition-standings> </div>', '.competition__container { overflow: auto; font-size: 13px; }', 'class=\"competition\"', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.on('mount', (function(_this) {\n  return function() {\n    _this.update();\n    return util.request(_this, '/competitions/' + opts.competition_id, function(competition) {\n      _this.competition = competition;\n      _this.title = competition.name + ' ' + competition.season.name + ' (' + competition.area_name + ')';\n      _this.update();\n      return util.title(_this.title);\n    });\n  };\n})(this));\n});\n","riot.tag2('competition-future-matches', '<div class=\"block wrapped\" if=\"{matches.length > 0}\"> <loading></loading> <matches matches=\"{matches}\"></matches> </div>', '', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.on('mount', (function(_this) {\n  return function() {\n    var season_id;\n    season_id = _this.parent.competition.season.season_id;\n    return util.request(_this, '/season/' + season_id + '/matches/future/10', function(matches) {\n      _this.matches = matches;\n      return _this.update();\n    });\n  };\n})(this));\n});\n","riot.tag2('competition-past-matches', '<div class=\"block wrapped\" if=\"{matches.length > 0}\"> <loading></loading> <matches matches=\"{matches}\"></matches> </div>', '', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.on('mount', (function(_this) {\n  return function() {\n    var season_id;\n    season_id = _this.parent.competition.season.season_id;\n    return util.request(_this, '/season/' + season_id + '/matches/past/10', function(matches) {\n      _this.matches = matches;\n      return _this.update();\n    });\n  };\n})(this));\n});\n","riot.tag2('competition-standings', '<div class=\"standings__container block wrapped\"> <loading></loading> <div each=\"{rounds}\" class=\"standings\"> <h2>{name}</h2> <table class=\"standings-table\"> <thead> <tr> <th>&nbsp;</th> <th class=\"team\">Team</th> <th><acronym title=\"Matches Played\">MP</acronym></th> <th><acronym title=\"Goals For / Goals Against\">GF&#8209;GA</acronym></th> <th><acronym title=\"Points\">Pts</acronym></th> </tr> </thead> <tbody> <tr each=\"{standings}\"> <td class=\"rank {zone_class(zone)}\"><span>{rank}</span></td> <td class=\"team\" title=\"{team_name}\">{team_name}</td> <td>{matches}</td> <td>{goals_for}&nbsp;-&nbsp;{goals_against}</td> <td class=\"pts\">{points}</td> </tr> </tbody> </table> </div> </div>', '.standings table { margin: 10px 0; width: 100%; } .standings tbody tr { border-top: 1px solid #ddd; } .standings th, .standings td { text-align: center; padding: 10px 7px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .standings th { text-align: center; color: #888; font-weight: normal; } .standings .rank { color: #888; } .standings .team { text-align: left; font-weight: 500; } .standings .pts { font-weight: 700; min-width: 25px; } .standings .zone span { display: inline-block; width: 24px; height: 24px; line-height: 24px; border-radius: 12px; color: #fff; } .standings .zone-1 span { background-color: #388E3C; } .standings .zone-2 span { background-color: #00796B; } .standings .zone-3 span { background-color: #0097A7; } .standings .zone-4 span { background-color: #1976D2; } .standings .zone-5 span { background-color: #303F9F; } .standings .zone-11 span { background-color: #FFA000; } .standings .zone-12 span { background-color: #F57C00; } .standings .zone-13 span { background-color: #E64A19; } .standings .zone-14 span { background-color: #5D4037; } .standings .zone-15 span { background-color: #455A64; }', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.on('mount', (function(_this) {\n  return function() {\n    var season_id;\n    season_id = _this.parent.competition.season.season_id;\n    return util.request(_this, '/season/' + season_id + '/standings', function(rounds) {\n      _this.rounds = rounds;\n      return _this.update();\n    });\n  };\n})(this));\n\nthis.zone_class = (function(_this) {\n  return function(zone) {\n    if (!zone) {\n      return '';\n    }\n    return 'zone zone-' + zone;\n  };\n})(this);\n});\n","riot.tag2('error404', '<div class=\"block error404__wrapper\"> <p>Page not found. <a href=\"/\">Go home</a> or use search above.</p> </div>', '.error404__wrapper p { margin: 3em 0 5em; padding: 0 0.5em; font-weight: 500; }', '', function(opts) {\n});\n","riot.tag2('home', '<div class=\"home__wrapper block wrapped\"> <loading></loading> <div each=\"{item in grouped_matches}\"> <h2><a href=\"#!/c/{item.competition.id}\">{item.competition.name} ({item.competition.area_name})</a></h2> <matches matches=\"{item.matches}\"></matches> </div> <p if=\"{grouped_matches && grouped_matches.length == 0}\"><em>No live matches at the moment.</em></p> </div>', '', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.on('mount', (function(_this) {\n  return function() {\n    return util.request(_this, '/matches/live', function(matches) {\n      var competition_matches, grouped_matches, i, item, key, len, match;\n      competition_matches = {};\n      for (i = 0, len = matches.length; i < len; i++) {\n        match = matches[i];\n        key = match['competition_id'];\n        competition_matches[key] || (competition_matches[key] = {\n          competition: {\n            id: match['competition_id'],\n            name: match['competition_name'],\n            area_name: match['area_name']\n          },\n          matches: []\n        });\n        competition_matches[key]['matches'].push(match);\n      }\n      grouped_matches = [];\n      for (key in competition_matches) {\n        item = competition_matches[key];\n        grouped_matches.push(item);\n      }\n      _this.grouped_matches = grouped_matches;\n      return _this.update();\n    });\n  };\n})(this));\n});\n","riot.tag2('loading', '<div class=\"loading__container\"> <p class=\"loading__loader loader\" if=\"{parent.loading}\">loading</p> <p class=\"loading__error\" if=\"{parent.error}\">ERROR ({parent.name}): {parent.error} (<a href=\"\" onclick=\"{reload_page}\">reload</a>)</p> </div>', '.loading__container { font-size: 13px; } .loading__loader { font-weight: 400; } .loading__error { display: inline-block; color: #c33; font-weight: 400; }', '', function(opts) {\nthis.reload_page = function() {\n  return location.reload();\n};\n});\n","riot.tag2('match', '<h1 class=\"match__title\"> <loading></loading> <virtual if=\"{match}\">{match.home_name} - {match.away_name} <score match=\"{match}\"></score></virtual> </h1> <div class=\"match__container block wrapped\" if=\"{match}\"> <p class=\"first\"> <a href=\"/#!/c/{match.competition_id}\">{match.competition_name} ({match.area_name})</a> - {format_date(match.date, match.time)}, {format_time(match.date, match.time)} </p> <div class=\"match__goals\" if=\"{match.goals.length > 0}\"> <h2 class=\"first\">Goals</h2> <p><span each=\"{match.goals}\">{name} {min}\\' <virtual if=\"{code != \\'G\\'}\">[{code}]</virtual> (<strong>{score[0]}:{score[1]}</strong>)</span></p> </div> <div class=\"match__penalty-shootout\" if=\"{match.penalty_shootout.length > 0}\"> <h2 class=\"first\">Penalty shootout</h2> <p><span each=\"{match.penalty_shootout}\">{name} <virtual if=\"{code == \\'M\\'}\">(X)</virtual><virtual if=\"{code == \\'G\\'}\">({score[0]}:{score[1]})</virtual></span></p> </div> <div class=\"match__players\" if=\"{match.home_players.length > 0}\"> <h2>{match.home_name} line-up ({match.home_coach.name})</h2> <p><span each=\"{match.home_players}\" class=\"{in: this.in}\"><virtual if=\"{this.in}\">{this.in}\\'</virtual> {name}</span></p> </div> <div class=\"match__players\" if=\"{match.away_players.length > 0}\"> <h2>{match.away_name} line-up ({match.away_coach.name})</h2> <p><span each=\"{match.away_players}\" class=\"{in: this.in}\"><virtual if=\"{this.in}\">{this.in}\\'</virtual> {name}</span></p> </div> <div class=\"match__cards\" if=\"{match.cards.length > 0}\"> <h2>Cards</h2> <p><span each=\"{match.cards}\">{name} {min}\\' ({code})</span></p> </div> </div> </div>', '.match__container p { margin: 1em 0; } .match__container .first { margin-top: 0; } .match__goals span:after, .match__cards span:after, .match__penalty-shootout span:after { content: \\', \\'; } .match__goals span:last-child:after, .match__cards span:last-child:after, .match__penalty-shootout span:last-child:after { content: none; } .match__players span:first-child:before { content: none; } .match__players span:before { content: \\', \\'; } .match__players span.in:before { content: \\' (\\'; } .match__players span.in:after { content: \\')\\'; }', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.format_date = util.format_date;\n\nthis.format_time = util.format_time;\n\nthis.on('mount', (function(_this) {\n  return function() {\n    _this.update();\n    return util.request(_this, '/matches/' + opts.match_id, function(match) {\n      _this.match = match;\n      _this.title = match.home_name + ' - ' + match.away_name + ' ' + match.ft[0] + ' - ' + match.ft[1];\n      _this.update();\n      return util.title(_this.title);\n    });\n  };\n})(this));\n});\n","riot.tag2('search', '<header class=\"search__container block\" role=\"banner\"> <div class=\"search__input-container\"> <input type=\"text\" role=\"search\" class=\"search__input\" accesskey=\"s\" name=\"q\" placeholder=\"Search Golazon\" onkeyup=\"{search}\" onfocus=\"{search}\"> <button class=\"search__clear-button\" onclick=\"{search_clear_click}\" if=\"{clear_button_visible}\"> </button> </div> <div class=\"search__extras-container\"> <p class=\"search__hint\" if=\"{results.length == 0 && (hint || loading)}\"> <span if=\"{loading}\" class=\"loader\">loading</span> {hint} </p> <ul class=\"search__results\" if=\"{results.length > 0}\"> <li each=\"{results}\"> <a href=\"/#!/c/{id}\" class=\"{active: active}\" onclick=\"{search_result_click}\" onmouseover=\"{search_result_mouseover}\"> {name} ({area_name}) <span if=\"{teamtype != \\'default\\'}\">{teamtype}</span> </a> </li> <li class=\"search__results-hint\" if=\"{results_hint}\"> {results_hint} </li> <li class=\"search__loader loader\" if=\"{loading}\"> loading more </li> </ul> </div> </header>', '.search__input-container { display: flex; } .search__input { font-size: 16px; border: 1px solid #ddd; border-radius: 0; color: #666; padding: 8px 8px; width: 100%; } .search__input:focus { outline: none; } @media screen and (-webkit-min-device-pixel-ratio: 0) and (max-device-width: 480px) { .search__input { font-size: 16px; -webkit-appearance: none; } } .search__clear-button { width: 30px; margin-left: -30px; border: 0; padding: 0; background: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTIgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PC9kZWZzPjxnIGlkPSJPY3RpY29ucyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgaWQ9IngiIGZpbGw9IiMwMDAwMDAiPjxwb2x5Z29uIGlkPSJTaGFwZSIgcG9pbnRzPSI3LjQ4IDggMTEuMjMgMTEuNzUgOS43NSAxMy4yMyA2IDkuNDggMi4yNSAxMy4yMyAwLjc3IDExLjc1IDQuNTIgOCAwLjc3IDQuMjUgMi4yNSAyLjc3IDYgNi41MiA5Ljc1IDIuNzcgMTEuMjMgNC4yNSI+PC9wb2x5Z29uPjwvZz48L2c+PC9zdmc+\") center center no-repeat; outline: none; } .search__extras-container { position: relative; } .search__hint { padding-top: 3px; padding-left: 10px; margin-bottom: -4px; font-size: 11px; } .search__results { position: absolute; top: 0; left: 0; right: 0; z-index: 1; border: 1px solid #ddd; border-width: 0 1px; background: #fcfcfc; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); min-width: 300px; } .search__results a { display: block; padding: 5px 8px; border: none; font-size: 15px; } .search__results a.active { background: #f6f6f6; } .search__results a:hover { text-decoration: none; } @media screen and (min-width: 480px) { .search__results a { font-size: 14px; } } .search__results-hint, .search__loader { padding: 5px 8px; font-style: italic; font-size: 13px; }', '', function(opts) {\nvar active_result, active_result_index, delay, exit_search, history, req, reset_search_results, util;\n\nutil = require('util');\n\nhistory = require('history');\n\nactive_result_index = -1;\n\nreq = delay = null;\n\nthis.results = [];\n\nthis.clear_button_visible = false;\n\nactive_result = (function(_this) {\n  return function(index) {\n    var i, len, ref, result;\n    if (index >= _this.results.length) {\n      index = 0;\n    }\n    if (index < 0) {\n      index = Math.max(_this.results.length - 1, 0);\n    }\n    ref = _this.results;\n    for (i = 0, len = ref.length; i < len; i++) {\n      result = ref[i];\n      result.active = false;\n    }\n    _this.results[index].active = true;\n    active_result_index = index;\n    return _this.update();\n  };\n})(this);\n\nreset_search_results = (function(_this) {\n  return function() {\n    active_result_index = -1;\n    _this.results = [];\n    _this.loading = false;\n    _this.clear_button_visible = false;\n    return _this.update();\n  };\n})(this);\n\nexit_search = (function(_this) {\n  return function() {\n    reset_search_results();\n    _this.hint = false;\n    return _this.update();\n  };\n})(this);\n\nthis.search = (function(_this) {\n  return function(e) {\n    var text;\n    text = e.target.value;\n    _this.hint = false;\n    _this.clear_button_visible = true;\n    if (e.keyCode === 40 && _this.results.length > 0) {\n      return active_result(active_result_index + 1);\n    } else if (e.keyCode === 38 && _this.results.length > 0) {\n      return active_result(active_result_index - 1);\n    } else if (e.keyCode === 27) {\n      return _this.search_clear_click();\n    } else if (e.keyCode === 13) {\n      if (active_result_index >= 0) {\n        riot.route('/c/' + _this.results[active_result_index].id);\n      }\n      return exit_search();\n    } else {\n      if (delay) {\n        util.terminate_delay(delay);\n      }\n      if (req) {\n        req.abort();\n      }\n      _this.results_hint = false;\n      if (text.length === 0) {\n        _this.loading = false;\n        _this.results = history.getAll(10);\n        active_result(0);\n        _this.update();\n        return;\n      }\n      _this.results = history.search(text);\n      if (text.length < 4) {\n        _this.results_hint = 'type 4 letters or more to search full database...';\n        _this.update();\n        return;\n      }\n      _this.loading = true;\n      _this.update();\n      return delay = util.delay(0.2, function() {\n        return req = util.request(_this, '/search?q=' + text, function(results) {\n          _this.results = _this.results.concat(results.filter(function(result) {\n            return _this.results.filter(function(r) {\n              return r.type === result.type && r.id === result.id;\n            }).length === 0;\n          }));\n          if (_this.results.length === 0) {\n            _this.hint = 'no results found';\n          }\n          return _this.update();\n        });\n      });\n    }\n  };\n})(this);\n\nthis.search_result_mouseover = (function(_this) {\n  return function(e) {\n    var result;\n    return active_result(((function() {\n      var i, len, ref, results1;\n      ref = this.results;\n      results1 = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        result = ref[i];\n        results1.push(result.id);\n      }\n      return results1;\n    }).call(_this)).indexOf(e.item.id));\n  };\n})(this);\n\nthis.search_result_click = (function(_this) {\n  return function(e) {\n    if (active_result_index >= 0) {\n      history.update(_this.results[active_result_index]);\n    }\n    exit_search();\n    return true;\n  };\n})(this);\n\nthis.search_clear_click = (function(_this) {\n  return function(e) {\n    _this.q.value = '';\n    _this.update();\n    return exit_search();\n  };\n})(this);\n\nthis.go_back = (function(_this) {\n  return function() {\n    reset_search_results();\n    return window.history.go(-1);\n  };\n})(this);\n\nthis.go_home = (function(_this) {\n  return function(e) {\n    reset_search_results();\n    return riot.route('/');\n  };\n})(this);\n});\n","riot.tag2('matches', '<div class=\"matches__wrapper\" if=\"{matches}\"> <table class=\"matches__container\"> <tbody> <tr each=\"{matches}\" onclick=\"{go_to_match}\"> <td class=\"min\" if=\"{min && period != \\'HT\\'}\">{min}\\'</td> <td class=\"period\" if=\"{period == \\'HT\\'}\">{period}</td> <td class=\"date\" if=\"{!min && period != \\'HT\\'}\">{format_date(date, time)}</td> <td class=\"host\">{home_name}</td> <td class=\"status\"><score match=\"{this}\"></score></td> <td class=\"away\">{away_name}</td> </tr> </tbody> </table> </div>', '.matches__container { width: 100%; table-layout: fixed; } .matches__container tbody tr { cursor: pointer; border-top: 1px solid #ddd; } .matches__container tbody tr:first-child { border-top: none; } .matches__container tbody tr:hover { background: #f6f6f6; } .matches__container td { padding: 8px 5px; white-space: nowrap; overflow: hidden; text-overflow: clip; } .matches__container .min, .matches__container .period, .matches__container .date { font-weight: 600; width: 60px; } .matches__container .date { font-weight: 600; } .matches__container .host { text-align: right; } .matches__container .status { text-align: center; font-weight: 600; width: 60px; white-space: normal; } .matches__container .live { color: #c33; animation: blinker 1s linear infinite; } @keyframes blinker { 50% { opacity: 0.5; } }', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.format_date = util.format_date;\n\nthis.format_time = util.format_time;\n\nthis.format_score = util.format_score;\n\nthis.go_to_match = function(e) {\n  return riot.route('/m/' + e.item.match_id);\n};\n\nthis.on('mount', (function(_this) {\n  return function() {\n    _this.matches = _this.opts.matches;\n    return _this.update();\n  };\n})(this));\n});\n","riot.tag2('score', '<span if=\"{match.fixture}\">{format_time(match.date, match.time)}</span> <span if=\"{match.live | match.ended}\" class=\"{live: match.live}\"> <virtual if=\"{!match.et || match.ps}\">{match.ft[0]}&nbsp;-&nbsp;{match.ft[1]}</virtual> <virtual if=\"{match.et && !match.ps}\">{match.et[0]}&nbsp;-&nbsp;{match.et[1]} aet</virtual> <virtual if=\"{match.ps}\">p.{match.ps[0]}-{match.ps[1]}</virtual> </span>', '', '', function(opts) {\nvar util;\n\nutil = require('util');\n\nthis.format_time = util.format_time;\n\nthis.format_score = util.format_score;\n\nthis.on('mount', (function(_this) {\n  return function() {\n    _this.match = _this.opts.match;\n    return _this.update();\n  };\n})(this));\n});\n","require.register 'util', (exports, require, module) ->\n  request = require 'superagent'\n  riot = require 'riot'\n\n  api_url = 'http://toller.xyz'\n\n  #\n  # Site title\n  #\n  exports.title = (title) ->\n    document.title = title + ' - Golazon'\n    document.title = 'Golazon' if title == 'Golazon'\n\n  #\n  # Returns request object\n  #\n  exports.request = (that, path, func) ->\n    that.loading = true\n    that.update()\n\n    request\n       .get api_url + path\n       .timeout 7000\n       .end (err, res) ->\n         that.loading = false\n         that.update()\n\n         if err\n          that.error = err.message\n          that.update()\n         else\n          func res.body\n\n  exports.delay = (seconds, func) ->\n    setTimeout func, seconds * 1000\n\n  exports.terminate_delay = (id) ->\n    clearTimeout id\n\n  #\n  # Event bus\n  #\n  exports.beholder = riot.observable()\n\n  #\n  # Normalize date to UTC before converting\n  #\n  normalize_date = (date, time) ->\n    y = date[0..3]\n    m = date[5..6] - 1\n    d = date[8..9]\n    hr = time[0..1]\n    mn = time[3..4]\n\n    new Date(Date.UTC(y, m, d, hr, mn, 0))\n\n  #\n  # Format date\n  #\n  exports.format_date = (date, time) ->\n    d = normalize_date(date, time)\n    today = new Date()\n\n    months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n    month = months[d.getMonth()]\n    day = ('0' + d.getDate()).slice(-2)\n\n    return 'Today' if d.toDateString() == today.toDateString()\n\n    \"#{month} #{day}\"\n\n  #\n  # Format time\n  #\n  exports.format_time = (date, time) ->\n    d = normalize_date(date, time)\n\n    hour = ('0' + d.getHours()).slice(-2)\n    min = ('0' + d.getMinutes()).slice(-2)\n\n    \"#{hour}:#{min}\"\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}